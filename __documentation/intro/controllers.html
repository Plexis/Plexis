<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>Plexis CMS</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../template/css/template.css" rel="stylesheet" media="all">
<script src="../template/js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../template/js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../template/js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../template/js/bootstrap.js" type="text/javascript"></script><script src="../template/js/template.js" type="text/javascript"></script><script src="../template/js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../template/img/favicon.ico">
<link rel="apple-touch-icon" href="../template/img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../template/img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../template/img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">Plexis CMS</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Core.html"><i class="icon-folder-open"></i> Core</a></li>
<li><a href="../packages/Database.html"><i class="icon-folder-open"></i> Database</a></li>
<li><a href="../packages/Library.html"><i class="icon-folder-open"></i> Library</a></li>
<li><a href="../packages/System.html"><i class="icon-folder-open"></i> System</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row"><div class="span12">
<ul class="breadcrumb">
<li>
<a href="../"><i class="icon-stop"></i> Index</a><span class="divider">\</span>
</li>
<li>The Model View Controller</li>
</ul>
<h3>Controllers</h3>
<p>
                    Controllers are the heart of all your pages. A Controller is basically a class file that is named in a way that can be associated with a URI.
                    Lets look at an example:
                </p>
<code>
                    www.yoursite.com/<var>page</var></code><p>In this example, Plexis would search for a controller file named "Page.php". in the "Page" module</p>
<h4>An Example Controller</h4>
<p>
                    Lets take a look at an example controller.
                </p>
<pre class="prettyprint">&lt;?php
    class Page extends Core\Controller 
    {
        public function index()
        {
            echo 'Hello World!';
        }
        
        public function test()
        {
            echo 'Successful Test!';
        }
        
        public function print($param1, $param2)
        {
            echo $param ."&lt;br /&gt;". $param2;
        }
    }
    ?&gt;</pre>
<p> 
                    Here's an exercise for you. follow the instructions below:
                    <ol>
<li>First, Create this file: <dfn>system/modules/Page/controllers/Page.php</dfn>.</li>
<li>Next, Place the contents of the example above into that newly created file.</li>
<li>Now, type this URL in a browser of your choice: "yoursite.com/page"</li>
<li>If you did everything correct, you should see "Hello World" on your screen.</li>
</ol></p>
<h4>In-depth view of the Example Controller</h4>
<p>
                    As you might have noticed, the Page class extended a class named: <dfn>Core\Controller</dfn>. You may also be wondering why there is backslashes in the extended class name. First of all, the reason
                    why we are extending the controller in the first place is because it allows you to inherit some useful methods, such as easily loading models and view files. Second, The reason why the system controller 
                    name has backslashes in it is because the main controller is <a href="http://www.php.net/manual/en/language.namespaces.rationale.php">namespaced</a>. All classes, except for the page controllers, and models 
                    must be namespaced to prevent page and class naming clashes.
                    <div class="alert alert-info">
<strong>Note:</strong> All class names must have the first letter capitalized! When namespacing, Each sub namespace must have its first letter Capitalized as well.</div></p>
<h3>Functions and Sub-Pages</h3>
<p>
                    In the example above, you may have notcied that what was in the "<dfn>index()</dfn>" function was displayed on the screen. By default, when only 1 paramater is given in the addressbar, the index() function
                    is used. Now if we did a URL like this:
                    <code>
                        www.yoursite.com/page/test
                    </code>
                    
                    Now you should see "Successful Test!" on your screen. What happened was, when Plexis read that second param "<dfn>test</dfn>", it knew to load the "<dfn>test()</dfn>" function rather then the 
                    "<var>index()</var>" function.
                </p>
<h4>Passing paramaters to functions</h4>
<p>
                    Now we are going to learn how to pass paramaters to our functions / subpages. Enter this URl in your browser:
                    <code>www.yoursite.com/page/print/welcome/guest</code>
                    You should see "welcome" and "guest" on your screen. Everything passed after the second segament in the url gets passed as 1 paramater to the function. The example function "<dfn>print()</dfn>", simpley just
                    echo's out the first and second paramaters, which in this case is "welcome" and "guest".
                </p>
<h3>Protecting Functions</h3>
<p>
                    There maybe times where you wish to use functions in the controller, that you dont want accessed via the browser. To protect these functions, simply add an underscore as the first letter like below:
                    <pre class="prettyprint">
    public function _noaccess() 
    {
        // stuffs
    }</pre>
                    If the user where to type this function in his URL, the 404 page will show rather then the protected method.
                </p>
<h3>How to setup the Default Controller</h3>
<p>
                    In Plexis, you can define a default controller to be loaded when a URI isn't present. You must edit the config file "<dfn>system/config/config.php</dfn>".
                    <pre class="prettyprint">$default_controller = "frontpage";
$default_action = "index";</pre></p>
<h3>Controller Constructors</h3>
<p>
                    If you decide that your controller needs a Constructor, you need to make sure that you construct the main parent controller in order to bennefit in the
                    useful methods it provides. While this is recommended, its surely not required. Highlighted below is the code you need to make sure and use in your custom Constructor
                    in order to inherit the core controllers methods and variables:
                    <pre class="prettyprint">&lt;?php
    class Page extends Core\Controller 
    {
        public function __construct()
        {
            <var>parent::__construct();</var>
            // Your own constructor code
        }
    }
    ?&gt;</pre></p>
<h4>Outputting data to the browser</h4>
<p>
                    In Plexis, if there wasnt a way to load an html page, then the framework would be pointless. Be sure to check out <a href="views.html">Views</a> and <a href="models.html">Models</a>.
                    to learn more about displaying html pages to the browser.
                </p>
</div></div>
<div class="row"><footer class="span12">
            Plexis CMS Copyrighted 2011 - 2012, Plexis Dev Team<br>
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a12</a> and<br></footer></div>
</div>
</body>
</html>
